{"version":3,"sources":["Components/DevAdmin/Reports/Reports.jsx"],"names":["Reports","token","useStateValue","useState","error","setError","array","setArray","showContent","setShowContent","month","setMonth","generatePDF","a","jsPDF","html","document","querySelector","callback","pdf","save","getReport","axios","get","headers","Authorization","report","data","console","log","response","useEffect","setTimeout","className","onClick","type","id","onChange","e","parseInt","target","value","style","visibility","margin","map","item","i","textTransform","name","lastName","email","total","colSpan","textAlign","paddingRight","fontSize","reduce","amount","deliveryOption","deliveryCharges"],"mappings":"2NAsIeA,UAhIC,WACf,IAAQC,EAAUC,cAAVD,MAER,EAA0BE,mBAAS,MAAnC,mBAAOC,EAAP,KAAcC,EAAd,KACA,EAA0BF,mBAAS,IAAnC,mBAAOG,EAAP,KAAcC,EAAd,KACA,EAAsCJ,oBAAS,GAA/C,mBAAOK,EAAP,KAAoBC,EAApB,KACA,EAA0BN,mBAAS,GAAnC,mBAAOO,EAAP,KAAcC,EAAd,KAEMC,EAAW,uCAAG,sBAAAC,EAAA,sDACT,IAAIC,IAAM,IAAK,KAAM,MAE3BC,KAAKC,SAASC,cAAc,YAAa,CAC5CC,SAAU,SAAUC,GACnBA,EAAIC,KAAK,gBALQ,2CAAH,qDAUXC,EAAS,uCAAG,4BAAAR,EAAA,yDACH,IAAVH,EADa,0CAGMY,IAAMC,IAAN,iCAAoCb,GAAS,CACjEc,QAAS,CACRC,cAAc,UAAD,OAAYxB,EAAM,OALlB,cAGTyB,EAHS,OAQfnB,EAASmB,EAAOC,KAAKrB,OACrBsB,QAAQC,IAAI,WAAYH,EAAOC,KAAKrB,OACpCG,GAAe,GAVA,kBAWRiB,GAXQ,kCAafrB,EAAS,KAAMyB,SAASH,KAAKvB,OAbd,0DAAH,qDA4Bf,OAVA2B,qBAAU,WACTV,MACE,CAACX,IAEAN,GACH4B,YAAW,WACV3B,EAAS,QACP,KAIH,sBAAK4B,UAAU,qBAAf,UACE7B,GAAS,qBAAK6B,UAAU,aAAf,SAA6B7B,IAEvC,sBAAK6B,UAAU,6BAAf,UACC,wBAAQC,QAAStB,EAAauB,KAAK,UAAnC,0BAGA,uBACA,yBACCC,GAAG,kBACHC,SAAU,SAACC,GAAD,OAAO3B,EAAS4B,SAASD,EAAEE,OAAOC,SAF7C,UAGC,wBAAQA,MAAM,IAAd,qCACA,wBAAQA,MAAM,IAAd,qBACA,wBAAQA,MAAM,IAAd,sBACA,wBAAQA,MAAM,IAAd,mBACA,wBAAQA,MAAM,IAAd,mBACA,wBAAQA,MAAM,IAAd,iBACA,wBAAQA,MAAM,IAAd,kBACA,wBAAQA,MAAM,IAAd,kBACA,wBAAQA,MAAM,IAAd,oBACA,wBAAQA,MAAM,IAAd,uBACA,wBAAQA,MAAM,KAAd,qBACA,wBAAQA,MAAM,KAAd,sBACA,wBAAQA,MAAM,KAAd,4BAIF,qBACCL,GAAG,UACHM,MAAO,CACNC,WAAYnC,EAAc,UAAY,SACtCoC,OAAQ,aAJV,SAMC,kCACC,gCACC,+BACC,sCACA,uCACA,6CAGF,kCACEtC,EAAMuC,KAAI,SAACC,EAAMC,GAAP,OACV,+BACC,oBAAIL,MAAO,CAAEM,cAAe,cAA5B,SACEF,EAAKG,KAAO,IAAMH,EAAKI,WAEzB,sCAAKJ,QAAL,IAAKA,OAAL,EAAKA,EAAMK,MAAX,OACA,oCAAKL,QAAL,IAAKA,OAAL,EAAKA,EAAMM,UALHL,MAQV,+BACC,uCACA,oBACCM,QAAS,EACTX,MAAO,CACNY,UAAW,QACXC,aAAc,OACdC,SAAU,UALZ,gBAOElD,QAPF,IAOEA,OAPF,EAOEA,EAAOmD,QACP,SAACC,EAAQZ,GAAT,MAEyB,aAAxBA,EAAKa,eACFb,EAAKM,MAAQM,EACW,iBAAxBZ,EAAKa,eACLb,EAAKM,MACLb,SAASO,EAAKc,iBACdF,EACA,IACJ","file":"static/js/32.069e54ae.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport jsPDF from \"jspdf\";\r\nimport axios from \"axios\";\r\nimport \"./Reports.css\";\r\nimport { useStateValue } from \"../../../StateProvider\";\r\n\r\nconst Reports = () => {\r\n\tconst { token } = useStateValue();\r\n\r\n\tconst [error, setError] = useState(null);\r\n\tconst [array, setArray] = useState([]);\r\n\tconst [showContent, setShowContent] = useState(false);\r\n\tconst [month, setMonth] = useState(0);\r\n\r\n\tconst generatePDF = async () => {\r\n\t\tvar doc = new jsPDF(\"p\", \"pt\", \"a4\");\r\n\r\n\t\tdoc.html(document.querySelector(\"#content\"), {\r\n\t\t\tcallback: function (pdf) {\r\n\t\t\t\tpdf.save(\"mypdf.pdf\");\r\n\t\t\t},\r\n\t\t});\r\n\t};\r\n\r\n\tconst getReport = async () => {\r\n\t\tif (month !== 0) {\r\n\t\t\ttry {\r\n\t\t\t\tconst report = await axios.get(`/api/dashboard/reports/${month}`, {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\tAuthorization: `Bearer ${token[0]}`,\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t\tsetArray(report.data.array);\r\n\t\t\t\tconsole.log(\"report: \", report.data.array);\r\n\t\t\t\tsetShowContent(true);\r\n\t\t\t\treturn report;\r\n\t\t\t} catch (error) {\r\n\t\t\t\tsetError(error.response.data.error);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tgetReport();\r\n\t}, [month]);\r\n\r\n\tif (error) {\r\n\t\tsetTimeout(() => {\r\n\t\t\tsetError(null);\r\n\t\t}, 2000);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"dashboard__reports\">\r\n\t\t\t{error && <div className=\"error__box\">{error}</div>}\r\n\r\n\t\t\t<div className=\"dashboard__reports-buttons\">\r\n\t\t\t\t<button onClick={generatePDF} type=\"primary\">\r\n\t\t\t\t\tGenerate Pdf\r\n\t\t\t\t</button>\r\n\t\t\t\t<br />\r\n\t\t\t\t<select\r\n\t\t\t\t\tid=\"reports__months\"\r\n\t\t\t\t\tonChange={(e) => setMonth(parseInt(e.target.value))}>\r\n\t\t\t\t\t<option value=\"0\">Select Month for Report</option>\r\n\t\t\t\t\t<option value=\"1\">January</option>\r\n\t\t\t\t\t<option value=\"2\">February</option>\r\n\t\t\t\t\t<option value=\"3\">March</option>\r\n\t\t\t\t\t<option value=\"4\">April</option>\r\n\t\t\t\t\t<option value=\"5\">May</option>\r\n\t\t\t\t\t<option value=\"6\">June</option>\r\n\t\t\t\t\t<option value=\"7\">July</option>\r\n\t\t\t\t\t<option value=\"8\">August</option>\r\n\t\t\t\t\t<option value=\"9\">September</option>\r\n\t\t\t\t\t<option value=\"10\">October</option>\r\n\t\t\t\t\t<option value=\"11\">November</option>\r\n\t\t\t\t\t<option value=\"12\">December</option>\r\n\t\t\t\t</select>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div\r\n\t\t\t\tid=\"content\"\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tvisibility: showContent ? \"visible\" : \"hidden\",\r\n\t\t\t\t\tmargin: \"20px auto\",\r\n\t\t\t\t}}>\r\n\t\t\t\t<table>\r\n\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th>name</th>\r\n\t\t\t\t\t\t\t<th>email</th>\r\n\t\t\t\t\t\t\t<th>amount</th>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t{array.map((item, i) => (\r\n\t\t\t\t\t\t\t<tr key={i}>\r\n\t\t\t\t\t\t\t\t<td style={{ textTransform: \"capitalize\" }}>\r\n\t\t\t\t\t\t\t\t\t{item.name + \" \" + item.lastName}\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t<td>{item?.email} </td>\r\n\t\t\t\t\t\t\t\t<td>{item?.total}</td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td>Total</td>\r\n\t\t\t\t\t\t\t<td\r\n\t\t\t\t\t\t\t\tcolSpan={2}\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\ttextAlign: \"right\",\r\n\t\t\t\t\t\t\t\t\tpaddingRight: \"60px\",\r\n\t\t\t\t\t\t\t\t\tfontSize: \"larger\",\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t{array?.reduce(\r\n\t\t\t\t\t\t\t\t\t(amount, item) =>\r\n\t\t\t\t\t\t\t\t\t\t// item.orderStatus === \"delivered\"\r\n\t\t\t\t\t\t\t\t\t\titem.deliveryOption === \"takeaway\"\r\n\t\t\t\t\t\t\t\t\t\t\t? item.total + amount\r\n\t\t\t\t\t\t\t\t\t\t\t: item.deliveryOption === \"homedelivery\"\r\n\t\t\t\t\t\t\t\t\t\t\t? item.total +\r\n\t\t\t\t\t\t\t\t\t\t\t  parseInt(item.deliveryCharges) +\r\n\t\t\t\t\t\t\t\t\t\t\t  amount\r\n\t\t\t\t\t\t\t\t\t\t\t: 0,\r\n\t\t\t\t\t\t\t\t\t0,\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Reports;\r\n"],"sourceRoot":""}