{"version":3,"sources":["../node_modules/@babel/runtime/helpers/esm/objectSpread2.js","Components/Screens/Global/NotFound.jsx","Components/DevAdmin/Orders/Orders/ManageOrders.jsx"],"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","NotFound","style","margin","fontSize","fontWeight","color","Box","lazy","ManageOrders","userAPI","useStateValue","isAdmin","useState","error","setError","token","orders","setOrders","pendingOrders","setPendingOrders","deliveredOrders","setDeliveredOrders","totalAmount","setTotalAmount","useEffect","item","orderStatus","deliveryOption","val","total","deliveryCharges","getOrders","useCallback","a","auth","headers","Authorization","axios","get","orderr","data","reverse","console","log","response","pendingOrdersSetting","setTimeout","className","map","order","Fragment","basket","fallback"],"mappings":"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","file":"static/js/19.acfb47e0.chunk.js","sourcesContent":["import defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","import React from \"react\";\n\nconst NotFound = () => {\n  return (\n    <div>\n      <h1\n        style={{\n          margin: \"30px\",\n          fontSize: \"2rem\",\n          fontWeight: \"600\",\n          color: \"red\",\n        }}>\n        404 Page Not Found\n      </h1>\n    </div>\n  );\n};\n\nexport default NotFound;\n","import React, { useEffect, useState, lazy, Suspense, useCallback } from \"react\";\nimport \"./ManageOrders.css\";\nimport { useStateValue } from \"./../../../../StateProvider\";\nimport axios from \"axios\";\nimport Loading from \"../../../Screens/Global/Loading\";\nimport NotFound from \"../../../Screens/Global/NotFound\";\nconst Box = lazy(() => import(\"./../Box/Box\"));\n\nconst ManageOrders = () => {\n\tconst { userAPI } = useStateValue();\n\tconst [isAdmin] = userAPI.isAdmin;\n\tconst [error, setError] = useState(null);\n\tconst { token } = useStateValue();\n\tconst [orders, setOrders] = useState([]);\n\tconst [pendingOrders, setPendingOrders] = useState([]);\n\tconst [deliveredOrders, setDeliveredOrders] = useState([]);\n\tconst [totalAmount, setTotalAmount] = useState(0);\n\n\tconst totalEarning = () => {\n\t\tsetTotalAmount(0);\n\t\torders?.forEach((item) => {\n\t\t\tif (item.orderStatus === \"delivered\") {\n\t\t\t\tif (item.deliveryOption === \"homedelivery\") {\n\t\t\t\t\tsetTotalAmount((val) => val + item.total + item.deliveryCharges);\n\t\t\t\t} else if (item.deliveryOption === \"takeaway\") {\n\t\t\t\t\tsetTotalAmount((val) => val + item.total);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\n\tuseEffect(() => {\n\t\ttotalEarning();\n\t}, [orders]);\n\n\tconst getOrders = useCallback(async () => {\n\t\ttry {\n\t\t\tconst auth = {\n\t\t\t\theaders: { Authorization: `Bearer ${token[0]}` },\n\t\t\t};\n\n\t\t\tconst orderr = await axios.get(\"/api/user/allorders\", auth);\n\n\t\t\tsetOrders(orderr.data.orders.reverse());\n\t\t\tconsole.log(\"orders: \", orderr.data.orders);\n\n\t\t\treturn orderr;\n\t\t} catch (error) {\n\t\t\tsetError(error.response.data.error);\n\t\t}\n\t}, [token]);\n\n\tuseEffect(() => {\n\t\tif (token[0]) {\n\t\t\tgetOrders();\n\t\t}\n\t}, [token, getOrders]);\n\n\t// useEffect(() => {\n\t//   if (orders) {\n\n\t// const u = orders.filter((item, i) => {\n\t//   return (\n\t//     parseInt(new Date(item.createdAt).getMonth()) + 1 ===\n\t//     12\n\t//   );\n\t// });\n\n\t//   const pending = orders.filter((item) => {\n\t//     const orderTime = new Date(item?.time).getTime();\n\t//     const nowTime = new Date().getTime() - 60 * 60 * 1000;\n\t//\n\t//     return orderTime > nowTime;\n\t//   })\n\t// })\n\n\tconst pendingOrdersSetting = useCallback(() => {\n\t\t// \t\tsetPendingOrders(\n\t\t// \t\t\torders.filter((item) => {\n\t\t// \t\t\t\tconst orderTime = new Date(item?.time).getTime();\n\t\t// \t\t\t\tconst nowTime = new Date().getTime() - 60 * 60 * 1000;\n\t\t//\n\t\t// \t\t\t\treturn orderTime > nowTime;\n\t\t// \t\t\t}),\n\t\t// \t\t);\n\n\t\tsetPendingOrders(orders.filter((item) => item.orderStatus === \"pending\"));\n\n\t\t// \t\tsetDeliveredOrders(\n\t\t// \t\t\torders.filter((item) => {\n\t\t// \t\t\t\tconst orderTime = new Date(item?.time).getTime();\n\t\t// \t\t\t\tconst nowTime = new Date().getTime() - 60 * 60 * 1000;\n\t\t//\n\t\t// \t\t\t\treturn orderTime < nowTime;\n\t\t// \t\t\t}),\n\t\t// \t\t);\n\n\t\tsetDeliveredOrders(\n\t\t\torders.filter((item) => item.orderStatus === \"delivered\"),\n\t\t);\n\t}, [orders]);\n\n\tuseEffect(() => {\n\t\tpendingOrdersSetting();\n\t}, [pendingOrdersSetting]);\n\n\tif (error) {\n\t\tsetTimeout(() => {\n\t\t\tsetError(null);\n\t\t}, 2000);\n\t}\n\n\tif (!isAdmin) {\n\t\treturn <NotFound />;\n\t}\n\n\treturn (\n\t\t<div className=\"manageOrders\">\n\t\t\t{error && <div className=\"error__box\">{error}</div>}\n\n\t\t\t<div className=\"manageOrders__header-boxes\">\n\t\t\t\t<div className=\"manageOrders__header-boxes-box\">\n\t\t\t\t\t<p className=\"manageOrders__header-box-title\">All Orders</p>\n\t\t\t\t\t<p className=\"manageOrders__header-box-desc\">\n\t\t\t\t\t\t{orders?.length ? orders?.length : \"0\"}\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"manageOrders__header-boxes-box\">\n\t\t\t\t\t<p className=\"manageOrders__header-box-title\">Pending Orders</p>\n\t\t\t\t\t<p className=\"manageOrders__header-box-desc\">\n\t\t\t\t\t\t{pendingOrders?.length ? pendingOrders?.length : \"0\"}\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"manageOrders__header-boxes-box\">\n\t\t\t\t\t<p className=\"manageOrders__header-box-title\">\n\t\t\t\t\t\tDelivered Orders\n\t\t\t\t\t</p>\n\t\t\t\t\t<p className=\"manageOrders__header-box-desc\">\n\t\t\t\t\t\t{deliveredOrders?.length ? deliveredOrders?.length : \"0\"}\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"manageOrders__header-boxes-box\">\n\t\t\t\t\t<p className=\"manageOrders__header-box-title\">Earning</p>\n\t\t\t\t\t<p className=\"manageOrders__header-box-desc\">{totalAmount}</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<h2 className=\"manageOrders__title\">Recent Orders</h2>\n\n\t\t\t<div className=\"manageOrders__container\">\n\t\t\t\t{orders?.map((order, i) => (\n\t\t\t\t\t<React.Fragment key={i}>\n\t\t\t\t\t\t{order?.basket?.length > 0 && (\n\t\t\t\t\t\t\t<Suspense fallback={<Loading />}>\n\t\t\t\t\t\t\t\t<Box {...order} />\n\t\t\t\t\t\t\t</Suspense>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default ManageOrders;\n"],"sourceRoot":""}