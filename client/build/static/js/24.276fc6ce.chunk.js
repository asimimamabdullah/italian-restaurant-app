(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[24],{101:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=r(12);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},641:function(e,t,r){},743:function(e,t,r){"use strict";r.r(t);var a=r(12),s=r(101),n=r(7),c=r.n(n),i=r(8),l=r(2),o=r(1),u=(r(641),r(10)),p=r.n(u),d=r(4),j=r(13),b=r(0);t.default=function(){var e=Object(j.b)(),t=Object(l.a)(e.token,2)[1],r=Object(l.a)(e.userAPI.isLoggedIn,1)[0],n=Object(o.useState)({firstName:"",lastName:"",email:"",images:"",password:"",confirmPassword:"",postalCode:"",address:"",building:"",city:""}),u=Object(l.a)(n,2),m=u[0],g=u[1],O=Object(o.useState)(null),h=Object(l.a)(O,2),f=h[0],x=h[1],_=Object(o.useState)(null),v=Object(l.a)(_,2),y=v[0],N=v[1],w=Object(o.useState)(!1),C=Object(l.a)(w,2),P=C[0],S=C[1],k=Object(o.useState)(null),D=Object(l.a)(k,2),I=D[0],q=D[1],A=function(){var e=Object(i.a)(c.a.mark((function e(r){var a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),S(!0),m.password===m.confirmPassword){e.next=6;break}return alert("Passwords doesn't match"),S(!1),e.abrupt("return");case 6:a=function(){var e=Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.post("/api/upload",y,{headers:{"Content-Type":"multipart/form-data"}});case 3:return t=e.sent,e.abrupt("return",t);case 7:e.prev=7,e.t0=e.catch(0),S(!1),console.log("error occured",e.t0.response.data.error),q(e.t0.response.data.error);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),n=function(){var e=Object(i.a)(c.a.mark((function e(r){var a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!r){e.next=7;break}return e.next=4,p.a.post("/api/user/register",Object(s.a)(Object(s.a)({},m),{},{images:{public_id:r.data.public_id,url:r.data.url}}));case 4:a=e.sent,S(!1),t(a.data.accessToken);case 7:if(r){e.next=13;break}return e.next=10,p.a.post("/api/user/register",Object(s.a)({},m));case 10:n=e.sent,S(!1),t(n.data.accessToken);case 13:localStorage.setItem("login",!0),window.location.href="/",e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),S(!1),q(e.t0.response.data.error);case 21:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t){return e.apply(this,arguments)}}();try{f&&a().then(n),f||n()}catch(l){S(!1)}case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(e){var t=e.target,r=t.name,n=t.value;g((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(a.a)({},r,n))}))};return I&&setTimeout((function(){q(null)}),2e3),P?Object(b.jsx)(d.a,{}):(r&&(window.location.href="/"),Object(b.jsxs)("div",{className:"register",children:[I&&Object(b.jsx)("div",{className:"error__box",children:I}),Object(b.jsxs)("form",{className:"form",onSubmit:A,children:[Object(b.jsxs)("div",{className:"register__form",children:[Object(b.jsxs)("div",{className:"register__img",children:[Object(b.jsx)("h3",{style:{letterSpacing:"1.3px",padding:"10px 20px",userSelect:"none"},children:"Choose Profile"}),!f&&Object(b.jsx)("input",{type:"file",className:"register__img-input",onChange:function(e){var t=e.target.files[0];if(!t)return alert("File Doesn't exist");var r=new FormData;r.append("file",t),N(r);var a=new FileReader;a.readAsDataURL(t),a.onloadend=function(){x(a.result)}}}),f&&Object(b.jsx)("img",{style:{userSelect:"none"},src:f,alt:""}),f&&Object(b.jsx)("span",{className:"register__form-clear-img",onClick:function(){N(null),x(null)},children:"Clear Image"})]}),Object(b.jsxs)("div",{className:"register__user",children:[Object(b.jsx)("h3",{style:{letterSpacing:"1.3px",userSelect:"none"},children:"Please Provide Your Info"}),Object(b.jsx)("div",{className:"register__input-group",children:Object(b.jsx)("input",{type:"text",name:"firstName",placeholder:"First Name *",required:!0,className:"register__input",value:m.firstName,onChange:F})}),Object(b.jsx)("div",{className:"register__input-group",children:Object(b.jsx)("input",{type:"text",name:"lastName",placeholder:"Last Name *",required:!0,className:"register__input",value:m.lastName,onChange:F})}),Object(b.jsx)("div",{className:"register__input-group",children:Object(b.jsx)("input",{type:"email",name:"email",placeholder:"Email *",required:!0,className:"register__input",value:m.email,onChange:F})}),Object(b.jsx)("div",{className:"register__input-group",children:Object(b.jsx)("input",{type:"password",name:"password",placeholder:"Password *",required:!0,className:"register__input",value:m.password,onChange:F})}),Object(b.jsx)("div",{className:"register__input-group",children:Object(b.jsx)("input",{type:"password",name:"confirmPassword",placeholder:"Confirm Password *",required:!0,className:"register__input",value:m.confirmPassword,onChange:F})})]}),Object(b.jsxs)("div",{className:"register__address",children:[Object(b.jsx)("h3",{style:{letterSpacing:"1.3px",userSelect:"none"},children:"Provide Address"}),Object(b.jsx)("div",{className:"register__input-group",children:Object(b.jsx)("input",{type:"text",name:"address",placeholder:"Address",className:"register__input",value:m.address,onChange:F})}),Object(b.jsx)("div",{className:"register__input-group",children:Object(b.jsx)("input",{type:"text",name:"building",placeholder:"eg. building #01 floor 2, flat 34",className:"register__input",value:m.building,onChange:F})}),Object(b.jsx)("div",{className:"register__input-group",children:Object(b.jsx)("input",{type:"text",name:"postalCode",placeholder:"Postal Code",className:"register__input",value:m.postalCode,onChange:F})}),Object(b.jsx)("div",{className:"register__input-group",children:Object(b.jsxs)("select",{defaultValue:"City",name:"city",className:"register__input",onChange:F,children:[Object(b.jsx)("option",{value:"City",disabled:!0,children:"Select City"}),Object(b.jsx)("option",{value:"Carpi",children:"Carpi"})]})}),Object(b.jsx)("div",{className:"register__input-group",children:Object(b.jsx)("input",{type:"text",name:"country",placeholder:"Country",className:"register__input",value:"Italy",onChange:F})})]})]}),Object(b.jsx)("button",{className:"register__submit-button",type:"submit",children:"Submit"})]})]}))}}}]);
//# sourceMappingURL=24.276fc6ce.chunk.js.map