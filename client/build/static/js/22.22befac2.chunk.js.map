{"version":3,"sources":["../node_modules/@babel/runtime/helpers/esm/objectSpread2.js","Components/DevAdmin/Products/EditProduct/EditProduct.jsx"],"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","EditProduct","navigate","useNavigate","index","useParams","useStateValue","categoriesAPI","productsAPI","userAPI","token","isAdmin","categories","callback","setCallback","products","useState","setImageUpload","setImageShow","loading","setLoading","error","setError","product_id","title","description","price","category","images","data","setData","handleFileChange","e","a","getFile","files","alert","formData","FormData","append","reader","FileReader","onloadend","result","readAsDataURL","handleChange","name","value","prevValues","funcWithoutImg","preventDefault","axios","put","_id","headers","Authorization","then","res","response","setTimeout","className","style","margin","onSubmit","type","onChange","src","url","alt","width","height","objectFit","onClick","required","placeholder","defaultValue","disabled","map","color","letterSpacing"],"mappings":"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","file":"static/js/22.22befac2.chunk.js","sourcesContent":["import defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"../CreateProduct.css\";\r\n\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport { useStateValue } from \"./../../../../StateProvider\";\r\nimport Loading from \"./../../../Screens/Global/Loading\";\r\n\r\nconst EditProduct = () => {\r\n\tconst navigate = useNavigate();\r\n\tconst params = useParams();\r\n\tconst index = params.index;\r\n\tconst { categoriesAPI, productsAPI, userAPI, token } = useStateValue();\r\n\tconst [isAdmin] = userAPI.isAdmin;\r\n\tconst [categories] = categoriesAPI.categories;\r\n\tconst [callback, setCallback] = productsAPI.callback;\r\n\tconst [products] = productsAPI.products;\r\n\r\n\tconst [imageUpload, setImageUpload] = useState(false);\r\n\tconst [imageShow, setImageShow] = useState(null);\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst [error, setError] = useState(null);\r\n\r\n\tconst [data, setData] = useState({\r\n\t\tproduct_id: products[index].product_id,\r\n\t\ttitle: products[index].title,\r\n\t\tdescription: products[index].description,\r\n\t\tprice: products[index].price,\r\n\t\tcategory: products[index].category,\r\n\t\timages: products[index].images,\r\n\t});\r\n\r\n\tconst handleFileChange = async (e) => {\r\n\t\tconst getFile = e.target.files[0];\r\n\t\tif (!getFile) return alert(\"File Doesn't exist\");\r\n\r\n\t\tlet formData = new FormData();\r\n\t\tformData.append(\"file\", getFile);\r\n\t\tsetImageUpload(formData);\r\n\t\tconst reader = new FileReader();\r\n\r\n\t\treader.onloadend = () => {\r\n\t\t\tsetImageShow(reader.result);\r\n\t\t};\r\n\r\n\t\treader.readAsDataURL(getFile);\r\n\t};\r\n\r\n\tconst handleChange = (e) => {\r\n\t\tconst { name, value } = e.target;\r\n\r\n\t\tsetData((prevValues) => ({\r\n\t\t\t...prevValues,\r\n\t\t\t[name]: value,\r\n\t\t}));\r\n\t};\r\n\r\n\tconst cancelImage = () => {\r\n\t\tsetImageShow(null);\r\n\t\tsetImageUpload(false);\r\n\t\tsetData((prevValues) => ({ ...prevValues, images: null }));\r\n\t};\r\n\r\n\tconst funcWithoutImg = async (e) => {\r\n\t\te.preventDefault();\r\n\t\ttry {\r\n\t\t\tconst res = await axios\r\n\t\t\t\t.put(\r\n\t\t\t\t\t`/api/product/${products[index]._id}`,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t...data,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\tAuthorization: `Bearer ${token[0]}`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t)\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tsetCallback(!callback);\r\n\t\t\t\t\tsetLoading(false);\r\n\t\t\t\t\tnavigate(\"/dashboard/products\");\r\n\t\t\t\t});\r\n\r\n\t\t\treturn res;\r\n\t\t} catch (error) {\r\n\t\t\tsetError(error.response.data.error);\r\n\t\t\tsetLoading(false);\r\n\t\t\treturn error.response.data;\r\n\t\t}\r\n\t};\r\n\r\n\tif (!isAdmin) {\r\n\t\treturn (\r\n\t\t\t<h1 style={{ margin: \"15px\", color: \"red\", letterSpacing: \"2px\" }}>\r\n\t\t\t\tYou don't have permission to visit this route\r\n\t\t\t</h1>\r\n\t\t);\r\n\t}\r\n\r\n\tif (error) {\r\n\t\tsetTimeout(() => {\r\n\t\t\tsetError(null);\r\n\t\t}, 2000);\r\n\t}\r\n\r\n\tif (loading) {\r\n\t\treturn <Loading />;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"create__product\">\r\n\t\t\t{error && <div className=\"error__box\">{error}</div>}\r\n\t\t\t<h1 style={{ margin: \"0 30px \" }}>Create Product</h1>\r\n\r\n\t\t\t<form onSubmit={funcWithoutImg} className=\"create__product-form\">\r\n\t\t\t\t<div className=\"create__product-container-leftSection\">\r\n\t\t\t\t\t{!products[index].images && (\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\t\tname=\"file\"\r\n\t\t\t\t\t\t\tonChange={handleFileChange}\r\n\t\t\t\t\t\t\tclassName=\"create__product-leftSection-image-input\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{products[index].images && (\r\n\t\t\t\t\t\t<div className=\"create__product-image-preview\">\r\n\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\tsrc={products[index].images.url}\r\n\t\t\t\t\t\t\t\talt=\"\"\r\n\t\t\t\t\t\t\t\twidth=\"100%\"\r\n\t\t\t\t\t\t\t\theight=\"100%\"\r\n\t\t\t\t\t\t\t\tstyle={{ objectFit: \"cover\" }}\r\n\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclassName=\"create__product-cancel-image\"\r\n\t\t\t\t\t\t\t\tonClick={cancelImage}>\r\n\t\t\t\t\t\t\t\tX\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"create__product-container-rightSection\">\r\n\t\t\t\t\t<div className=\"create__product-input\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tplaceholder=\"Product Id\"\r\n\t\t\t\t\t\t\tvalue={data.product_id}\r\n\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\tname=\"product_id\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"create__product-input\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tname=\"title\"\r\n\t\t\t\t\t\t\tplaceholder=\"Title\"\r\n\t\t\t\t\t\t\tvalue={data.title}\r\n\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"create__product-input\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tplaceholder=\"Description\"\r\n\t\t\t\t\t\t\tvalue={data.description}\r\n\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\tname=\"description\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"create__product-input\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tplaceholder=\"Price\"\r\n\t\t\t\t\t\t\tvalue={data.price}\r\n\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\tname=\"price\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"create__product-input\">\r\n\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\tname=\"category\"\r\n\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\tdefaultValue={products[index].category}\r\n\t\t\t\t\t\t\trequired>\r\n\t\t\t\t\t\t\t<option value=\"Category\" disabled>\r\n\t\t\t\t\t\t\t\tSelect Category\r\n\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t{categories.map((category, i) => (\r\n\t\t\t\t\t\t\t\t<option key={i} value={category.name}>\r\n\t\t\t\t\t\t\t\t\t{category.name}\r\n\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<button className=\"create__product-form-button\">Submit</button>\r\n\t\t\t\t</div>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default EditProduct;\r\n"],"sourceRoot":""}