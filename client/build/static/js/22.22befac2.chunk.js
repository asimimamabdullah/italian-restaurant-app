(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[22],{101:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var c=r(12);function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,c)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){Object(c.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},250:function(e,t,r){},747:function(e,t,r){"use strict";r.r(t);var c=r(12),n=r(101),a=r(7),i=r.n(a),s=r(8),o=r(2),u=r(1),l=r(10),p=r.n(l),d=(r(250),r(3)),j=r(13),b=r(4),O=r(0);t.default=function(){var e=Object(d.g)(),t=Object(d.h)().index,r=Object(j.b)(),a=r.categoriesAPI,l=r.productsAPI,h=r.userAPI,m=r.token,f=Object(o.a)(h.isAdmin,1)[0],g=Object(o.a)(a.categories,1)[0],v=Object(o.a)(l.callback,2),x=v[0],_=v[1],y=Object(o.a)(l.products,1)[0],w=Object(u.useState)(!1),N=Object(o.a)(w,2),P=(N[0],N[1]),S=Object(u.useState)(null),C=Object(o.a)(S,2),k=(C[0],C[1]),D=Object(u.useState)(!1),A=Object(o.a)(D,2),q=A[0],F=A[1],I=Object(u.useState)(null),E=Object(o.a)(I,2),J=E[0],R=E[1],T=Object(u.useState)({product_id:y[t].product_id,title:y[t].title,description:y[t].description,price:y[t].price,category:y[t].category,images:y[t].images}),z=Object(o.a)(T,2),B=z[0],L=z[1],U=function(){var e=Object(s.a)(i.a.mark((function e(t){var r,c,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.target.files[0]){e.next=3;break}return e.abrupt("return",alert("File Doesn't exist"));case 3:(c=new FormData).append("file",r),P(c),(n=new FileReader).onloadend=function(){k(n.result)},n.readAsDataURL(r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(e){var t=e.target,r=t.name,a=t.value;L((function(e){return Object(n.a)(Object(n.a)({},e),{},Object(c.a)({},r,a))}))},X=function(){var r=Object(s.a)(i.a.mark((function r(c){var a;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c.preventDefault(),r.prev=1,r.next=4,p.a.put("/api/product/".concat(y[t]._id),Object(n.a)({},B),{headers:{Authorization:"Bearer ".concat(m[0])}}).then((function(){_(!x),F(!1),e("/dashboard/products")}));case 4:return a=r.sent,r.abrupt("return",a);case 8:return r.prev=8,r.t0=r.catch(1),R(r.t0.response.data.error),F(!1),r.abrupt("return",r.t0.response.data);case 13:case"end":return r.stop()}}),r,null,[[1,8]])})));return function(e){return r.apply(this,arguments)}}();return f?(J&&setTimeout((function(){R(null)}),2e3),q?Object(O.jsx)(b.a,{}):Object(O.jsxs)("div",{className:"create__product",children:[J&&Object(O.jsx)("div",{className:"error__box",children:J}),Object(O.jsx)("h1",{style:{margin:"0 30px "},children:"Create Product"}),Object(O.jsxs)("form",{onSubmit:X,className:"create__product-form",children:[Object(O.jsxs)("div",{className:"create__product-container-leftSection",children:[!y[t].images&&Object(O.jsx)("input",{type:"file",name:"file",onChange:U,className:"create__product-leftSection-image-input"}),y[t].images&&Object(O.jsxs)("div",{className:"create__product-image-preview",children:[Object(O.jsx)("img",{src:y[t].images.url,alt:"",width:"100%",height:"100%",style:{objectFit:"cover"}}),Object(O.jsx)("div",{className:"create__product-cancel-image",onClick:function(){k(null),P(!1),L((function(e){return Object(n.a)(Object(n.a)({},e),{},{images:null})}))},children:"X"})]})]}),Object(O.jsxs)("div",{className:"create__product-container-rightSection",children:[Object(O.jsx)("div",{className:"create__product-input",children:Object(O.jsx)("input",{required:!0,type:"text",placeholder:"Product Id",value:B.product_id,onChange:V,name:"product_id"})}),Object(O.jsx)("div",{className:"create__product-input",children:Object(O.jsx)("input",{required:!0,type:"text",name:"title",placeholder:"Title",value:B.title,onChange:V})}),Object(O.jsx)("div",{className:"create__product-input",children:Object(O.jsx)("input",{type:"text",placeholder:"Description",value:B.description,onChange:V,name:"description"})}),Object(O.jsx)("div",{className:"create__product-input",children:Object(O.jsx)("input",{required:!0,type:"text",placeholder:"Price",value:B.price,onChange:V,name:"price"})}),Object(O.jsx)("div",{className:"create__product-input",children:Object(O.jsxs)("select",{name:"category",onChange:V,defaultValue:y[t].category,required:!0,children:[Object(O.jsx)("option",{value:"Category",disabled:!0,children:"Select Category"}),g.map((function(e,t){return Object(O.jsx)("option",{value:e.name,children:e.name},t)}))]})}),Object(O.jsx)("button",{className:"create__product-form-button",children:"Submit"})]})]})]})):Object(O.jsx)("h1",{style:{margin:"15px",color:"red",letterSpacing:"2px"},children:"You don't have permission to visit this route"})}}}]);
//# sourceMappingURL=22.22befac2.chunk.js.map