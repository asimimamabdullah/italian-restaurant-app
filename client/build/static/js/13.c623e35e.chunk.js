(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[13],{131:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){return null===e||void 0===e?void 0:e.reduce((function(e,t){return t.price*t.quantity+e}),0)}},160:function(e,t,n){"use strict";var r=n(2),a=n(1),o=(n(161),n(131)),c=n(24),i=n.n(c),s=n(13),l=n(3),d=n(5),u=n(0);t.a=function(){var e=Object(l.g)(),t=Object(s.b)(),n=Object(r.a)(t.basket,2),c=n[0],p=n[1],b=Object(a.useState)(null),j=Object(r.a)(b,2),v=j[0],h=j[1],O=Object(s.b)().userAPI,m=Object(r.a)(O.postalData,1)[0],f=Object(r.a)(O.deliveryOption,1)[0];return v&&setTimeout((function(){h(null)}),2e3),Object(u.jsx)("div",{className:"order__right-section",children:Object(u.jsxs)("div",{className:"order__right-section-content",children:[Object(u.jsxs)("h2",{className:"orderTotal__title",children:[null===c||void 0===c?void 0:c.length," items in Cart",Object(u.jsx)(i.a,{style:{color:"#d70f64",fontSize:"xx-large"}})]}),null===c||void 0===c?void 0:c.map((function(e,t){return Object(u.jsxs)("div",{className:"order__total-list",children:[Object(u.jsx)("p",{className:"order__total-title",children:null===e||void 0===e?void 0:e.title}),Object(u.jsxs)("p",{className:"order__total-price",children:[Object(u.jsxs)("span",{className:"order__total-list-text",children:["x",null===e||void 0===e?void 0:e.quantity]}),null===e||void 0===e?void 0:e.price," \u20ac"]})]},t)})),Object(u.jsx)("div",{className:"order__total-list",style:{display:"takeaway"===f?"none":"flex",justifyContent:"flex-end"},children:Object(u.jsxs)("p",{className:"order__total-price",style:{fontSize:"large",fontWeight:"bold"},children:[Object(u.jsx)("span",{className:"order__total-list-text",style:{fontSize:"small",fontWeight:"bold"},children:"tassa di consegna"}),null===m||void 0===m?void 0:m.deliveryPrice]})}),Object(u.jsxs)("h3",{className:"order__total",children:[Object(u.jsx)("span",{children:" Totale "}),parseFloat(Object(o.a)(c)).toFixed(2)," \u20ac"]}),"takeaway"===f?null:(null===m||void 0===m?void 0:m.deliveryPrice)?Object(u.jsxs)("h4",{className:"order__total-fee-text",children:["with delivery fee"," ",Object(u.jsx)("span",{children:(parseFloat(Object(o.a)(c))+parseFloat(null===m||void 0===m?void 0:m.deliveryPrice)).toFixed(2)})]}):Object(u.jsx)("h4",{children:"Enter Postal Info"}),Object(u.jsxs)("div",{className:"order__total-btns",children:[Object(u.jsx)("button",{className:"order__total-empty-button",onClick:function(){p([])},children:"Carrello Vuoto"}),Object(u.jsx)(d.b,{to:c.length>0?"/checkout":"/order",className:"order__total-checkout-button-link",children:Object(u.jsx)("button",{className:"order__total-checkout-button",onClick:function(){c.length>0&&e("/checkout")},children:"Pagina di Pagamento"})})]})]})})}},161:function(e,t,n){},384:function(e,t,n){},752:function(e,t,n){"use strict";n.r(t);var r=n(7),a=n.n(r),o=n(8),c=n(2),i=n(1),s=n(10),l=n.n(s),d=n(5),u=n(386),p=n.n(u),b=(n(384),n(385)),j=n(0),v=function(e){var t=e.onSuccess,n=e.onCancel,r=e.onError,a=e.total,o=e.loading;e.setError;return Object(j.jsx)(b.c,{deferLoading:o,options:{"client-id":"Ac8o4swJtckfwVOCnGLmPeW4KuApWFOLBx4LLW8TcnUD7t5AkSBU6i1yeuPK822ps6QJt-5gL9swQsWI",locale:"it_IT",currency:"EUR"},children:Object(j.jsx)(b.b,{fundingSource:b.a.PAYPAL,onApprove:t,onError:r,onCancel:n,createOrder:function(e,t){if(console.log("data: ",e),0!==a)return t.order.create({purchase_units:[{amount:{value:a}}]})},style:{layout:"horizontal",label:"checkout",height:40}})})},h=n(3),O=n(160),m=n(13),f=n(131),x=n(29);t.default=function(){var e=Object(h.g)(),t=Object(m.b)(),n=Object(m.b)(),r=n.userAPI,s=n.token,u=r.email,b=r.lastName,y=r.name,k=r.phone,g=r.userID,_=null===t||void 0===t?void 0:t.basket,N=Object(c.a)(_,2),w=N[0],D=N[1],C=null===r||void 0===r?void 0:r.postalCode,P=Object(c.a)(C,1)[0],S=null===r||void 0===r?void 0:r.address,I=Object(c.a)(S,1)[0],F=null===r||void 0===r?void 0:r.building,A=Object(c.a)(F,1)[0],E=null===r||void 0===r?void 0:r.checkPhone,z=Object(c.a)(E,1)[0],T=null===r||void 0===r?void 0:r.checkEmail,L=Object(c.a)(T,1)[0],B=null===r||void 0===r?void 0:r.checkName,W=Object(c.a)(B,1)[0],J=Object(c.a)(r.postalData,1)[0],U=Object(c.a)(r.paymentOption,1)[0],q=Object(c.a)(r.deliveryOption,1)[0],K=Object(c.a)(r.takeaway,1)[0],Q=Object(i.useState)(""),V=Object(c.a)(Q,2),G=V[0],R=V[1],Y=Object(i.useState)(!0),H=Object(c.a)(Y,2),M=H[0],X=H[1],Z=Object(i.useState)(null),$=Object(c.a)(Z,2),ee=$[0],te=$[1];Object(i.useEffect)((function(){te(parseFloat(Object(f.a)(w))+parseFloat(null===J||void 0===J?void 0:J.deliveryPrice))}),[w,null===J||void 0===J?void 0:J.deliveryPrice]);var ne=function(){var t=Object(o.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Date.now()+1983,t.prev=1,t.next=4,l.a.post("/api/user/createorder",{orders:{orderNumber:r,userID:g,postalCode:P,address:I,paymentID:n.orderID,paymentDetails:n,building:A,basket:w,name:y||W,email:u||L,lastName:b,phone:k||z,time:r,total:Object(f.a)(w),deliveryCharges:null===J||void 0===J?void 0:J.deliveryPrice,deliveryOption:q,paymentOption:U,paymentStatus:"received",orderStatus:"pending"}},{headers:{Authorization:"Bearer ".concat(s[0])}}).then((function(){D([]),e("/checkout/ordersuccess/".concat(r))}));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),R(t.t0.response.data.error);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}(),re=function(){var t=Object(o.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Date.now()+1983,t.prev=1,t.next=4,l.a.post("/api/user/createorder",{orders:{orderNumber:r,userID:g,paymentID:n.orderID,paymentDetails:n,basket:w,name:y||W,email:u||L,lastName:b,phone:k||z,time:r,total:Object(f.a)(w),deliveryOption:q,paymentOption:U,paymentStatus:"received",orderStatus:"pending"}},{headers:{Authorization:"Bearer ".concat(s[0])}}).then((function(){D([]),e("/checkout/ordersuccess/".concat(r))}));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),R(t.t0.response.data.error);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}(),ae=function(){var t=Object(o.a)(a.a.mark((function t(){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Date.now()+1983,t.prev=1,t.next=4,l.a.post("/api/user/createorder",{orders:{orderNumber:n,userID:g,postalCode:P,address:I,building:A,basket:w,name:y||W,email:u||L,lastName:b,phone:k||z,time:n,total:Object(f.a)(w),deliveryCharges:null===J||void 0===J?void 0:J.deliveryPrice,deliveryOption:q,paymentOption:U,paymentStatus:"pending",orderStatus:"pending"}},{headers:{Authorization:"Bearer ".concat(s[0])}}).then((function(){D([]),e("/checkout/ordersuccess/".concat(n))}));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),R(t.t0.response.data.error);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(){return t.apply(this,arguments)}}(),oe=function(){var t=Object(o.a)(a.a.mark((function t(){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Date.now();case 2:return t.t0=t.sent,n=t.t0+1983,t.prev=4,t.next=7,l.a.post("/api/user/createorder",{orders:{orderNumber:n,userID:g,basket:w,name:y||W,email:u||L,lastName:b,phone:k||z,time:n,total:Object(f.a)(w),deliveryOption:q,paymentOption:U,paymentStatus:"pending",orderStatus:"pending"}},{headers:{Authorization:"Bearer ".concat(s[0])}}).then((function(){D([]),e("/checkout/ordersuccess/".concat(n))}));case 7:t.next=12;break;case 9:t.prev=9,t.t1=t.catch(4),R(t.t1.response.data.error);case 12:case"end":return t.stop()}}),t,null,[[4,9]])})));return function(){return t.apply(this,arguments)}}(),ce=function(){var e=Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:R("Transaction not successful");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:R("Cancelled Transaction");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e,t;P&&I&&A&&W&&L&&z&&!((null===(e=parseFloat(Object(f.a)(w)))||void 0===e?void 0:e.toFixed(2))<parseFloat(null===J||void 0===J?void 0:J.minOrder))&&0!==w.length&&J||X(!0),(P&&I&&A&&W&&L&&z&&(null===(t=parseFloat(Object(f.a)(w)))||void 0===t?void 0:t.toFixed(2))>=parseInt(null===J||void 0===J?void 0:J.minOrder)&&w.length>0&&J||K&&L&&W&&z)&&X(!1)}),[A,w,I,M,W,L,z,null===J||void 0===J?void 0:J.minOrder,K,P,J]),G&&setTimeout((function(){R(null)}),2e3),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"paymentOptions",children:[G&&Object(j.jsx)("div",{className:"error__box",children:G}),Object(j.jsx)("div",{className:"paymentOptions__front-text",children:Object(j.jsxs)(d.b,{to:"/checkout",children:[Object(j.jsx)(p.a,{}),"Change Address Info"]})}),Object(j.jsx)(O.a,{}),Object(j.jsx)("div",{className:"paymentOptions-Paypal-btn",children:"paypaldelivery"===U?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("button",{onClick:function(e){return"homedelivery"===q?ne({orderID:"something now"}):"takeaway"===q&&re({orderID:"something now"})},style:{padding:"10px 15px",margin:"10px"},children:"Pay the bill"}),Object(j.jsx)(v,{total:"takeaway"===q?Object(f.a)(w):ee,onSuccess:"homedelivery"===q?ne:"takeaway"===q&&re,onCancel:ie,onError:ce,setError:R,loading:M})]}):"cashondelivery"===U&&Object(j.jsx)("button",{className:"paymentOptions-confirmOrder-btn",onClick:"homedelivery"===q?ae:oe,children:"Confirm Order"})})]}),Object(j.jsx)(x.a,{})]})}}}]);
//# sourceMappingURL=13.c623e35e.chunk.js.map